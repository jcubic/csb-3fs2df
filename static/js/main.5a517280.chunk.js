(this["webpackJsonpmusic-player"]=this["webpackJsonpmusic-player"]||[]).push([[0],[,,,,,,,,,,,,,,,function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){},,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var c=n(2),o=n(8),r=n.n(o),a=n(3),s=(n(15),n(0));function i(e){var t=e.title;return Object(s.jsx)("h1",{children:t})}n(17);function u(e){var t=e.song,n=e.isCurrent,c=e.onSelect;return Object(s.jsxs)("li",{className:"SongListItem ".concat(n?"selected":""),onClick:function(){return c(t)},children:[t.title," by ",t.artist]})}var l=n(9),j=n(10),b=(n(18),["className","vertical"]),f=function(e){var t=e.className,n=e.vertical,c=void 0!==n&&n,o=Object(j.a)(e,b),r=["slider"];return t&&r.push(t),c&&r.push("vertical"),Object(s.jsx)("div",{className:r.join(" "),children:Object(s.jsx)("input",Object(l.a)({type:"range"},o))})},d=(n(19),n(6)),O=n(5),v=function(e){var t=Math.floor(e/60),n=Math.floor(e%60),c=n<10?"0".concat(n):"".concat(n);return"".concat(t,":").concat(c)};function g(e){var t=e.showControls,n=void 0!==t&&t,o=e.isPlaying,r=e.onPause,u=e.onPlay,l=e.onEnded,j=e.onNext,b=e.onPrevious,g=e.song,h=g.audioUrl,x=g.coverUrl,m=Object(c.useRef)(),p=Object(c.useState)(0),S=Object(a.a)(p,2),y=S[0],N=S[1],P=Object(c.useState)(0),E=Object(a.a)(P,2),U=E[0],k=E[1],C=Object(c.useState)(100),I=Object(a.a)(C,2),w=I[0],_=I[1];Object(c.useEffect)((function(){var e=localStorage.getItem("__player_volume");e&&_(+e)}),[]),Object(c.useEffect)((function(){m.current.volume=w/100}),[w,h]);return Object(s.jsxs)("section",{className:"SongPlayer",children:[Object(s.jsx)(i,{title:"Music Player"}),Object(s.jsx)("img",{width:"250",height:"250",src:x,alt:"Song cover"}),Object(s.jsx)("audio",{ref:m,autoPlay:o,onEnded:l,onTimeUpdate:function(){return k(m.current.currentTime)},onLoadedMetadata:function(){N(m.current.duration)},controls:n,children:Object(s.jsx)("source",{src:h})},h),v(U)," / ",v(y),Object(s.jsx)(f,{className:"progress",onInput:function(e){var t=+e.target.value;k(t),m.current.currentTime=t},max:y,min:"0",value:U}),Object(s.jsxs)("nav",{children:[Object(s.jsx)("button",{onClick:b,children:Object(s.jsx)(d.a,{icon:O.a})}),Object(s.jsx)("button",{onClick:function(){o?(m.current.pause(),r()):(m.current.play(),u())},children:Object(s.jsx)(d.a,{icon:o?O.c:O.d})}),Object(s.jsx)("button",{onClick:j,children:Object(s.jsx)(d.a,{icon:O.b})}),Object(s.jsx)("div",{className:"volume",children:Object(s.jsx)(f,{vertical:!0,min:"0",max:"100",onInput:function(e){var t=+e.target.value;localStorage.setItem("__player_volume",t),_(t)},value:w})})]})]})}n(22);function h(e){var t=e.children;return Object(s.jsx)("section",{className:"Songs",children:t})}n(23);var x=n(4),m=n.n(x),p="song";function S(){var e=function(e){var t=Object(c.useState)([]),n=Object(a.a)(t,2),o=n[0],r=n[1],s=Object(c.useState)(0),i=Object(a.a)(s,2),u=i[0],l=i[1];Object(c.useEffect)((function(){fetch(e).then((function(e){e.ok&&e.json().then(r)}))}),[e]),Object(c.useEffect)((function(){var e=function(e){l(e)};return m.a.on(p,e),function(){m.a.off(p,e)}}),[]),Object(c.useEffect)((function(){m.a.broadcast(p,u)}),[u]);var j=o[u];return{songs:o,currentSong:j,selectSong:function(e){var t=o.findIndex((function(t){return t.audioUrl===e.audioUrl}));t>=0&&l(t)},nextSong:function(){u===o.length-1?l(0):l(u+1)},previewsSong:function(){l(0===u?o.length-1:u-1)}}}("https://music.jcubic.pl/api/songs.json"),t=e.songs,n=e.currentSong,o=e.selectSong,r=e.previewsSong,l=e.nextSong,j=Object(c.useState)(!1),b=Object(a.a)(j,2),f=b[0],d=b[1];return Object(s.jsx)("div",{className:"App",children:0===t.length?"Loading...":Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(g,{song:n,isPlaying:f,onEnded:l,onPause:function(){return d(!1)},onPlay:function(){return d(!0)},onNext:l,onPrevious:r}),Object(s.jsxs)(h,{children:[Object(s.jsx)(i,{title:"Songs"}),Object(s.jsx)("ul",{children:t.map((function(e){return Object(s.jsx)(u,{song:e,isCurrent:n.audioUrl===e.audioUrl,onSelect:o},e.audioUrl)}))})]})]})})}n(24);var y=document.getElementById("root");r.a.render(Object(s.jsx)(c.StrictMode,{children:Object(s.jsx)(S,{})}),y)}],[[25,1,2]]]);
//# sourceMappingURL=main.5a517280.chunk.js.map